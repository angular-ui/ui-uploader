/*!
 * angular-ui-uploader
 * https://github.com/angular-ui/ui-uploader
 * Version: 1.0.0 - 2015-07-01T01:57:39.947Z
 * License: MIT
 */
(function(){angular.module("ui.uploader",[]).service("uiUploader",a);a.$inject=["$log"];function a(j){var i=this;i.files=[];i.options={};i.activeUploads=0;i.uploadedFiles=0;j.info("uiUploader loaded");function e(l){for(var k=0;k<l.length;k++){i.files.push(l[k])}}function h(){return i.files}function d(k){i.options=k;for(var l=0;l<i.files.length;l++){if(i.activeUploads==i.options.concurrency){break}if(i.files[l].active){continue}f(i.files[l],i.options.url,i.options.data,i.options.options)}}function c(k){i.files.splice(i.files.indexOf(k),1)}function g(){i.files.splice(0,i.files.length)}return{addFiles:e,getFiles:h,files:i.files,startUpload:d,removeFile:c,removeAll:g};function b(k){var m=["n/a","bytes","KiB","MiB","GiB","TB","PB","EiB","ZiB","YiB"];var l=+Math.floor(Math.log(k)/Math.log(1024));return(k/Math.pow(1024,l)).toFixed(l?1:0)+" "+m[isNaN(k)?0:l+1]}function f(n,l,o,k){var q,p,r,m=""||"file";o=o||{};i.activeUploads+=1;n.active=true;q=new window.XMLHttpRequest();if(k.withCredentials==true){q.withCredentials=true}p=new window.FormData();q.open("POST",l);q.upload.onloadstart=function(){};q.upload.onprogress=function(s){if(!s.lengthComputable){return}n.loaded=s.loaded;n.humanSize=b(s.loaded);i.options.onProgress(n)};q.onload=function(){i.activeUploads-=1;i.uploadedFiles+=1;d(i.options);i.options.onCompleted(n,q.responseText);if(i.uploadedFiles===i.files.length){i.uploadedFiles=0;i.options.onCompletedAll(i.files)}};q.onerror=function(){};if(o){for(r in o){if(o.hasOwnProperty(r)){p.append(r,o[r])}}}p.append(m,n,n.name);q.send(p);return q}}}());